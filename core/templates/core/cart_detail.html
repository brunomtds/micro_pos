<!-- micro_pos/core/templates/core/cart_detail.html -->
{% extends 'core/base.html' %}

{% block title %}Cart - Micro POS{% endblock %}

{% block content %}
    <h1 class="mb-4">Your Cart</h1>

    {% if cart_items %}
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Product</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Item Total</th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart_items %}
            <tr>
                <td>{{ item.product.name }}</td>
                <td>{{ item.quantity }}</td>
                <td>U$ {{ item.product.price|floatformat:2 }}</td>
                <td>U$ {{ item.item_price|floatformat:2 }}</td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <th colspan="3" class="text-end">Cart Total:</th>
                <th>U$ {{ total_price|floatformat:2 }}</th>
            </tr>
        </tfoot>
    </table>

    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
        <a href="{% url 'product_list' %}" class="btn btn-secondary me-md-2">Continue Shopping</a>
        <form action="{% url 'checkout' %}" method="post" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-primary">Checkout</button>
        </form>
    </div>

    {% else %}
    <div class="alert alert-info" role="alert">
        Your cart is empty.
    </div>
    <a href="{% url 'product_list' %}" class="btn btn-primary">Back to Products</a>
    {% endif %}
{% endblock %}
